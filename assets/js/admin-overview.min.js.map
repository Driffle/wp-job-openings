{"version":3,"sources":["overview.js"],"names":["jQuery","document","ready","$","postboxes","add_postbox_toggles","awsmJobsAdminOverview","screen_id","chartAreaPlugin","id","beforeDraw","chart","args","options","chartArea","primaryBgColor","primaryColor","secondaryColor","secondaryBgColor","ctx","height","bottom","top","divisions","scales","y","ticks","length","factor","save","fillStyle","rectY","fillRect","left","right","restore","data","labels","analytics_data","datasets","label","i18n","chart_label","fill","borderColor","backgroundColor","pointBackgroundColor","pointBorderColor","borderWidth","pointBorderWidth","pointRadius","pointHoverRadius","tension","x","grid","drawOnChartArea","tickWidth","font","weight","drawBorder","tickLength","precision","plugins","legend","display","chartAreaCustomizer","analyticsChart","renderAnalyticsChart","reRender","chartData","destroy","Chart","type","update","on","e","ui","item","attr","addClass","removeClass"],"mappings":"aAIAA,OAAAC,UAAAC,MAAA,SAAAC,GAKAC,UAAAC,oBAAAC,sBAAAC,WAIA,IAAAC,EAAA,CACAC,GAAA,sBACAC,WAAA,SAAAC,EAAAC,EAAAC,GACA,GAAAA,EAAAC,WAAAD,EAAAC,UAAAC,eAAA,CACA,IAAAC,EAAAH,EAAAC,UAAAC,eACAE,EAAAJ,EAAAC,UAAAI,kBAAAF,EACAG,EAAAR,EAAAQ,IACAL,EAAAH,EAAAG,UACAM,EAAAN,EAAAO,OAAAP,EAAAQ,IACAC,EAAAZ,EAAAa,OAAAC,EAAAC,MAAAC,OAAA,EACAC,EAAAR,EAAAG,EAEAJ,EAAAU,OACA,IAAA,IAAAH,EAAA,EAAAA,GAAAH,EAAAG,IAAA,CAEAP,EAAAW,UADAJ,EAAA,GAAA,EACAT,EAEAD,EAEA,IAAAe,EAAAjB,EAAAQ,IACA,EAAAI,IACAK,IAAAL,EAAA,GAAAE,GAEAT,EAAAa,SAAAlB,EAAAmB,KAAAF,EAAAjB,EAAAoB,MAAApB,EAAAmB,KAAAL,GAEAT,EAAAgB,aAMAhB,EAAAhB,EAAA,oDACAiC,EAAA,CACAC,OAAA/B,sBAAAgC,eAAAD,OACAE,SAAA,CAAA,CACAC,MAAAlC,sBAAAmC,KAAAC,YACAN,KAAA9B,sBAAAgC,eAAAF,KACAO,MAAA,EACAC,YAAA,UACAC,gBAAA,UACAC,qBAAA,UACAC,iBAAA,UACAC,YAAA,EACAC,iBAAA,EACAC,YAAA,EACAC,iBAAA,EACAC,QAAA,MAGAvC,EAAA,CACAW,OAAA,CACA6B,EAAA,CACAC,KAAA,CACAN,YAAA,IACAO,iBAAA,EACAC,UAAA,KAEA9B,MAAA,CACA+B,KAAA,CACAC,OAAA,UAIAjC,EAAA,CACA6B,KAAA,CACAK,YAAA,EACAC,WAAA,GACAJ,UAAA,GAEA9B,MAAA,CACA+B,KAAA,CACAC,OAAA,QAEAG,UAAA,KAIAC,QAAA,CACAC,OAAA,CACAC,SAAA,GAEAC,oBAAA,CACAnD,UAAA,CACAC,eAAA,UACAG,iBAAA,WAMAgD,EAAA,KACA,SAAAC,EAAAC,EAAAC,GAEAA,OAAA,IAAAA,GAAAA,GADAD,OAAA,IAAAA,GAAAA,IAEAF,IACAA,EAAAI,UACAJ,EAAA,MAGAA,EADAA,GACA,IAAAK,MAAApD,EAAA,CACAqD,KAAA,OACApC,KAAAA,EACAvB,QAAAA,EACAiD,QAAA,CAAAtD,KAGA6D,GAAA,WAAAA,GAAA,SAAAA,IACAH,EAAA9B,KAAAC,OAAAgC,EAAAhC,OACA6B,EAAA9B,KAAAG,SAAA,GAAAH,KAAAiC,EAAAjC,KACA8B,EAAAO,UAIAnE,sBAAAgC,gBAAA,SAAAhC,sBAAAgC,gBAAA,EAAAhC,sBAAAgC,eAAAF,KAAAT,QACAwC,IAEAhE,EAAA,sDAAAuE,GAAA,WAAA,SAAAC,EAAAC,GACA,8CAAAA,EAAAC,KAAAC,KAAA,OACAX,GAAA,KAGAhE,EAAA,mIAAAuE,GAAA,kBAAA,WACAP,GAAA,OAGAhE,EAAA,qCAAA4E,SAAA,aACA5E,EAAA,qCAAA6E,YAAA","file":"admin-overview.min.js","sourcesContent":["/* global awsmJobsAdminOverview, postboxes, Chart */\n\n'use strict';\n\njQuery(document).ready(function($) {\n\n\t/*================ Meta-boxes ================*/\n\n\t// Activate toggle state.\n\tpostboxes.add_postbox_toggles(awsmJobsAdminOverview.screen_id);\n\n\t/*================ Charts ================*/\n\n\tvar chartAreaPlugin = {\n\t\tid: 'chartAreaCustomizer',\n\t\tbeforeDraw: function(chart, args, options) {\n\t\t\tif (options.chartArea && options.chartArea.primaryBgColor) {\n\t\t\t\tvar primaryColor = options.chartArea.primaryBgColor;\n\t\t\t\tvar secondaryColor = options.chartArea.secondaryBgColor || primaryColor;\n\t\t\t\tvar ctx = chart.ctx;\n\t\t\t\tvar chartArea = chart.chartArea;\n\t\t\t\tvar height = chartArea.bottom - chartArea.top;\n\t\t\t\tvar divisions = chart.scales.y.ticks.length - 1;\n\t\t\t\tvar factor = height / divisions;\n\n\t\t\t\tctx.save();\n\t\t\t\tfor (var ticks = 1; ticks <= divisions; ticks++) {\n\t\t\t\t\tif (ticks % 2 === 0) {\n\t\t\t\t\t\tctx.fillStyle = secondaryColor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx.fillStyle = primaryColor;\n\t\t\t\t\t}\n\t\t\t\t\tvar rectY = chartArea.top;\n\t\t\t\t\tif (ticks > 1) {\n\t\t\t\t\t\trectY += (ticks - 1) * factor;\n\t\t\t\t\t}\n\t\t\t\t\tctx.fillRect(chartArea.left, rectY, chartArea.right - chartArea.left, factor);\n\t\t\t\t}\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t};\n\n\t// Applications analytics chart\n\tvar ctx = $('#awsm-jobs-overview-applications-analytics-chart');\n\tvar data = {\n\t\tlabels: awsmJobsAdminOverview.analytics_data.labels,\n\t\tdatasets: [ {\n\t\t\tlabel: awsmJobsAdminOverview.i18n.chart_label,\n\t\t\tdata: awsmJobsAdminOverview.analytics_data.data,\n\t\t\tfill: false,\n\t\t\tborderColor: '#149efe',\n\t\t\tbackgroundColor: '#149efe',\n\t\t\tpointBackgroundColor: '#0091ff',\n\t\t\tpointBorderColor: '#e9f5fe',\n\t\t\tborderWidth: 4,\n\t\t\tpointBorderWidth: 2,\n\t\t\tpointRadius: 4,\n\t\t\tpointHoverRadius: 5,\n\t\t\ttension: 0.1\n\t\t} ]\n\t};\n\tvar options = {\n\t\tscales: {\n\t\t\tx: {\n\t\t\t\tgrid: {\n\t\t\t\t\tborderWidth: 1.5,\n\t\t\t\t\tdrawOnChartArea: false,\n\t\t\t\t\ttickWidth: 1.5\n\t\t\t\t},\n\t\t\t\tticks: {\n\t\t\t\t\tfont: {\n\t\t\t\t\t\tweight: 'bold'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\ty: {\n\t\t\t\tgrid: {\n\t\t\t\t\tdrawBorder: false,\n\t\t\t\t\ttickLength: 10,\n\t\t\t\t\ttickWidth: 0\n\t\t\t\t},\n\t\t\t\tticks: {\n\t\t\t\t\tfont: {\n\t\t\t\t\t\tweight: 'bold'\n\t\t\t\t\t},\n\t\t\t\t\tprecision: 0\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tplugins: {\n\t\t\tlegend: {\n\t\t\t\tdisplay: false\n\t\t\t},\n\t\t\tchartAreaCustomizer: {\n\t\t\t\tchartArea: {\n\t\t\t\t\tprimaryBgColor: '#fafafa',\n\t\t\t\t\tsecondaryBgColor: '#fff'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar analyticsChart = null;\n\tfunction renderAnalyticsChart(reRender, chartData) {\n\t\treRender = typeof reRender !== 'undefined' ? reRender : false;\n\t\tchartData = typeof chartData !== 'undefined' ? chartData : false;\n\t\tif (reRender && analyticsChart) {\n\t\t\tanalyticsChart.destroy();\n\t\t\tanalyticsChart = null;\n\t\t}\n\t\tif (! analyticsChart) {\n\t\t\tanalyticsChart = new Chart(ctx, {\n\t\t\t\ttype: 'line',\n\t\t\t\tdata: data,\n\t\t\t\toptions: options,\n\t\t\t\tplugins: [ chartAreaPlugin ]\n\t\t\t});\n\t\t}\n\t\tif (chartData && 'labels' in chartData && 'data' in chartData) {\n\t\t\tanalyticsChart.data.labels = chartData.labels;\n\t\t\tanalyticsChart.data.datasets[0].data = chartData.data;\n\t\t\tanalyticsChart.update();\n\t\t}\n\t}\n\n\tif (awsmJobsAdminOverview.analytics_data && 'data' in awsmJobsAdminOverview.analytics_data && awsmJobsAdminOverview.analytics_data.data.length > 0) {\n\t\trenderAnalyticsChart();\n\n\t\t$('.awsm-jobs-overview-mb-wrapper .meta-box-sortables').on('sortstop', function(e, ui) {\n\t\t\tif (ui.item.attr('id') === 'awsm-jobs-overview-applications-analytics') {\n\t\t\t\trenderAnalyticsChart(true);\n\t\t\t}\n\t\t});\n\t\t$('#awsm-jobs-overview-applications-analytics .handle-order-higher, #awsm-jobs-overview-applications-analytics .handle-order-lower' ).on('click.postboxes', function() {\n\t\t\trenderAnalyticsChart(true);\n\t\t});\n\t} else {\n\t\t$('.awsm-jobs-overview-chart-wrapper').addClass('awsm-hide');\n\t\t$('.awsm-jobs-overview-empty-wrapper').removeClass('awsm-hide');\n\t}\n});\n"]}